(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e){e.exports={form:{id:-1,text:"",bolded:!1,color:"color1",formState:"add",checked:!1},realignmentMode:{modeState:!1,fId:-1,lId:-1},userInfo:{userId:!1,status:"INIT",todolists:[{id:0,text:"\uc624\ub298\uc758 \ud560 \uc77c1",checked:!1,color:"color1",bolded:!0,timestamp:"Sat Mar 12 2018 16:12:09 GMT-0800 (PST)"},{id:1,text:"\ud074\ub9ad\ud558\uba74 \uccb4\ud06c\uac00 \ub429\ub2c8\ub2e4.",checked:!0,color:"color1",bolded:!1,timestamp:"Sat Mar 12 2018 16:12:09 GMT-0800 (PST)"},{id:2,text:"\uae00\uc528 \uc0c9\ub3c4 \ubc14\uafd4\ubcf4\uc138\uc694.",checked:!1,color:"color3",bolded:!1,timestamp:"Fri Mar 11 2018 12:00:00 GMT-0800 (PST)"}]}}},103:function(e,t,n){e.exports=n(209)},108:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){},138:function(e,t,n){},140:function(e,t,n){},142:function(e,t,n){},146:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(99),i=n.n(r),s=n(6),c=n(7),l=n(9),u=n(8),d=n(10),p=(n(108),n(1)),m=n(16),f=(n(114),n(116),n(118),function(e){var t=e.color,n=e.onColor,o=e.selected;return a.a.createElement("span",{className:"palette-".concat(t," color ").concat(o===t?"active":""),onClick:function(e){e.stopPropagation(),n(t)}},a.a.createElement("i",{className:"material-icons"},"invert_colors"))}),E=function(e){var t=e.colors,n=void 0===t?["color1","color2","color3","color4"]:t,o=e.input,r=e.onEdit,i=void 0===r?function(e){return e}:r,s=function(e){o.color!==e&&(o.color=e,i(o.text,o.color,o.bolded,o.formState,o.id,o.checked))};return a.a.createElement("div",{className:"palette"},n.map(function(e){return a.a.createElement(f,{key:e,color:e,selected:o.color,onColor:s})}),a.a.createElement("div",{className:"make-bold",onClick:function(e){e.stopPropagation(),i(o.text,o.color,!o.bolded,o.formState,o.id,o.checked)}},a.a.createElement("i",{className:"fa fa-bold"})))},S=n(26),I={EDIT_INPUT:"EDIT_INPUT",RESET_INPUT:"RESET_INPUT",ADD_LIST:"ADD_LIST",CHECK_TOGGLE_LIST:"CHECK_TOGGLE_LIST",EDIT_LIST:"EDIT_LIST",REMOVE_LIST:"REMOVE_LIST",REALIGN_LIST:"REALIGN_LIST",ADD_STATE:"ADD_STATE",EDIT_STATE:"EDIT_STATE",REALIGN_MODE:"REALIGN_MODE",REALIGN_GET_FID:"REALIGN_GET_FID",REALIGN_FID_RESET:"REALIGN_FID_RESET",LOG_IN_SUCCESS:"LOG_IN_SUCCESS",LOG_IN_FAILURE:"LOG_IN_FAILURE",LOG_OUT_SUCCESS:"LOG_OUT_SUCCESS",GET_TODO_LIST:"GET_TODO_LIST",PUT_TODO_SUCCESS:"PUT_TODO_SUCCESS",PUT_TODO_FAILURE:"PUT_TODO_FAILURE",SIGN_UP_SUCCESS:"SIGN_UP_SUCCESS",SIGN_UP_FAILURE:"SIGN_UP_FAILURE"},h=n(14),g=n.n(h),v=function(e,t,n,o,a,r){return"RESET"===e?{type:I.RESET_INPUT}:{text:e,color:t,bolded:n,formState:o,id:a,checked:r,type:I.EDIT_INPUT}};var _=function(e,t){return{type:I.LOG_IN_SUCCESS,user:e,todolists:t}},b=function(e){return{type:I.LOG_IN_FAILURE,error:e}};var T=function(e){return{type:I.SIGN_UP_SUCCESS,userId:e}},O=function(e){return{type:I.SIGN_UP_FAILURE,error:e}};var L=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).toggleRealignMode=function(){n.props.onRealignMode(!n.props.realignmentMode.modeState),n.props.onEdit("RESET")},n.submit=function(e){e.preventDefault();var t=n.props.form,o=n.props.userInfo.todolists,a=n.inputText.value,r=n.props.userInfo.userId;if(!(a.length<1)){if("add"===t.formState){var i={id:o.length,text:a,bolded:t.bolded,color:t.color,checked:!1,timestamp:(new Date).toString()};n.props.onAdd(r,i,o)}else{var s={id:t.id,text:a,bolded:t.bolded,color:t.color,checked:t.checked,timestamp:(new Date).toString()};n.props.onEditSubmit(r,s,o)}n.props.onEdit("RESET"),n.inputText.value="",n.inputText.className="",n.inputText.focus()}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.form.text!==this.props.form.text&&(this.inputText.value=this.props.form.text)}},{key:"render",value:function(){var e=this,t=this.props.form,n=a.a.createElement("form",{className:"form",onSubmit:this.submit},a.a.createElement("input",{className:"".concat(t.color," ").concat(t.bolded?"bold-font":""),ref:function(t){e.inputText=t}}),a.a.createElement("button",{className:"create-button"},a.a.createElement("i",{className:"material-icons"},"edit"))),o=a.a.createElement("form",{className:"form",onSubmit:this.submit},a.a.createElement("input",{className:"".concat(t.color," ").concat(t.bolded?"bold-font":""),defaultValue:t.text,ref:function(t){e.inputText=t}}),a.a.createElement("button",{className:"edit-button"},a.a.createElement("i",{className:"material-icons"},"edit")));return a.a.createElement("div",{className:"todo-form"},a.a.createElement("div",{className:"palette-with-btns"},a.a.createElement("div",{className:"sort-btn",onClick:this.toggleRealignMode},a.a.createElement("i",{className:"fa fa-reorder"})),a.a.createElement(E,{input:this.props.form,onEdit:this.props.onEdit})),"add"===this.props.form.formState?n:o)}}]),t}(o.Component),N=Object(m.b)(function(e){return{form:e.form,userInfo:e.userInfo,realignmentMode:e.realignmentMode}},function(e){return{onEdit:function(t,n,o,a,r,i){e(v(t,n,o,a,r,i))},onAdd:function(t,n,o){e(function(e,t,n){var o=Object(S.a)(n);return o.push(t),e&&g.a.put("/api/lists/"+e._id,{todolists:o}).then(function(e){o=e}),{type:I.ADD_LIST,todolists:o}}(t,n,o))},onEditSubmit:function(t,n,o){e(function(e,t,n){var o=Object(S.a)(n),a=o.findIndex(function(e){return e.id===t.id});return o[a]=t,e&&g.a.put("/api/lists/"+e._id,{todolists:o}).then(function(e){o=e}),{type:I.EDIT_LIST,todolists:o}}(t,n,o))},onRealignMode:function(t){e(function(e){return{type:I.REALIGN_MODE,modeState:e}}(t))}}})(L),C=(n(138),function(e){var t=e.text,n=void 0===t?"":t,o=e.bolded,r=void 0!==o&&o,i=e.checked,s=void 0!==i&&i,c=e.color,l=void 0===c?"color1":c,u=e.id,d=void 0===u?-1:u,p=e.form,m=void 0===p?{}:p,f=e.userInfo,E=void 0===f?{}:f,S=e.resetInput,I=void 0===S?function(e){return e}:S,h=e.onAddList,g=void 0===h?function(e){return e}:h,v=e.onEditList,_=void 0===v?function(e){return e}:v,b=e.onCheckToggle,T=void 0===b?function(e){return e}:b,O=e.onRemoveList,L=void 0===O?function(e){return e}:O;return a.a.createElement("div",{className:"todo-item ".concat("edit"===m.formState&&m.id===d?"edit-item":""),onClick:function(){return T(E,d,!s)}},a.a.createElement("div",{className:"remove ".concat(s?"checked":""),onClick:function(e){e.stopPropagation(),L(E,d),I("RESET")}},a.a.createElement("i",{className:"material-icons"},"delete_forever")),a.a.createElement("div",{className:"todo-text ".concat(l," ").concat(s?"checked":""," ").concat(r?"bold-font":"")},a.a.createElement("div",null,n)),s&&a.a.createElement("div",{className:"check-mark"},a.a.createElement("i",{className:"material-icons"},"done")),a.a.createElement("div",{className:"edit-btn",onClick:function(e){e.stopPropagation(),"add"===m.formState?_(d,n,l,r,s):m.id===d?g():_(d,n,l,r,s)}},a.a.createElement("i",{className:"material-icons"},"edit")))}),k=(n(140),function(e){var t=e.text,n=void 0===t?"":t,o=e.id,r=void 0===o?-1:o,i=e.color,s=void 0===i?"color1":i,c=e.bolded,l=void 0!==c&&c,u=e.checked,d=void 0!==u&&u,p=e.realignmentMode,m=void 0===p?{}:p,f=e.userInfo,E=void 0===f?{}:f,S=e.onRealign_Fid,I=void 0===S?function(e){return e}:S,h=e.onRealignList,g=void 0===h?function(e){return e}:h,v=m.fId===r;return a.a.createElement("div",{className:"realignment-item  ".concat(v?"r_checked":""),onClick:function(){var e,t;m.fId<0?I(r):((e=m.fId)!==(t=r)&&g(E,e,t),I(-1))}},a.a.createElement("div",{className:"realignment-btn ".concat(v?"r_checked":"")},a.a.createElement("i",{className:"fa fa-sort"})),a.a.createElement("div",{className:"realignment-text ".concat(s," ").concat(d?"checked":""," ").concat(l?"bold-font":"")},a.a.createElement("div",null,n)))}),R=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.realignmentMode,n=this.props.userInfo.todolists.sort(function(e,t){return t.id-e.id});return a.a.createElement("div",null,n.map(function(n){return!1===t.modeState?a.a.createElement(C,Object.assign({form:e.props.form,userInfo:e.props.userInfo},n,{onRemoveList:e.props.onRemoveList,onAddList:e.props.onAddList,onEditList:e.props.onEditList,onCheckToggle:e.props.onCheckToggle,key:n.id,resetInput:e.props.resetInput})):a.a.createElement(k,Object.assign({},n,{key:n.id,userInfo:e.props.userInfo,realignmentMode:t,onRealign_Fid:e.props.onRealign_Fid,onRealignList:e.props.onRealignList}))}))}}]),t}(o.Component),G=Object(m.b)(function(e){return{form:e.form,userInfo:e.userInfo,realignmentMode:e.realignmentMode}},function(e){return{onEditList:function(t,n,o,a,r){e(function(e,t,n,o,a){return{type:I.EDIT_STATE,id:e,text:t,color:n,bolded:o,checked:a}}(t,n,o,a,r))},onAddList:function(){e({type:I.ADD_STATE})},onRemoveList:function(t,n){e(function(e,t){var n=e.userId,o=Object(S.a)(e.todolists).reverse();return o.splice(t,1),o.map(function(e,t){return e.id=t,e}),n&&g.a.put("/api/lists/"+n._id,{todolists:o}).then(function(e){o=e}),{type:I.REMOVE_LIST,todolists:o}}(t,n))},onCheckToggle:function(t,n,o){e(function(e,t,n){var o=Object(S.a)(e.todolists),a=e.userId;return o.map(function(e){return e.id===t&&(e.checked=n),e}),a&&g.a.put("/api/lists/"+a._id,{todolists:o}).then(function(e){o=e}),{type:I.CHECK_TOGGLE_LIST,todolists:o}}(t,n,o))},onRealign_Fid:function(t){e(function(e){return-1===e?{type:I.REALIGN_FID_RESET}:{type:I.REALIGN_GET_FID,fId:e}}(t))},onRealignList:function(t,n,o){e(function(e,t,n){var o=Object(S.a)(e.todolists).reverse(),a=e.userId,r=o[t];return o.splice(t,1),o.splice(n,0,r),o.map(function(e,t){return e.id=t,e}),a&&g.a.put("/api/lists/"+a._id,{todolists:o}).then(function(e){o=e}),{type:I.REALIGN_LIST,todolists:o}}(t,n,o))},resetInput:function(t){e(v(t))}}})(R),y=(n(142),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={closing:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.visible&&!e.visible&&(this.setState({closing:!0}),setTimeout(function(){t.setState({closing:!1})},1e3))}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.message,o=this.state.closing;return t||o?a.a.createElement("div",{className:"warning-wrapper"},a.a.createElement("div",{className:"warning ".concat(o?"bounceOutUp":"bounceIn"," animated")},n)):null}}]),t}(o.Component)),D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={formStatus:!1,warning:{status:!1,message:""}},n.openLogin=n.openLogin.bind(Object(p.a)(Object(p.a)(n))),n.handleLogout=n.handleLogout.bind(Object(p.a)(Object(p.a)(n))),n.openSignup=n.openSignup.bind(Object(p.a)(Object(p.a)(n))),n.onChange=n.onChange.bind(Object(p.a)(Object(p.a)(n))),n.handleLogin=n.handleLogin.bind(Object(p.a)(Object(p.a)(n))),n.handleSignup=n.handleSignup.bind(Object(p.a)(Object(p.a)(n))),n.openHome=n.openHome.bind(Object(p.a)(Object(p.a)(n))),n.showWarning=n.showWarning.bind(Object(p.a)(Object(p.a)(n))),n.onKeyPress=n.onKeyPress.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"openLogin",value:function(e){var t=this;e.preventDefault(),this.setState({formStatus:"login"},function(){t.idInput.focus()})}},{key:"openSignup",value:function(e){var t=this;e.preventDefault(),this.setState({formStatus:"signup"},function(){t.idInput.focus()})}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),this.props.logout(),this.setState({formStatus:!1},function(){t.props.resetInput("RESET")})}},{key:"openHome",value:function(e){e.preventDefault(),this.setState({formStatus:!1})}},{key:"handleLogin",value:function(){var e=this,t=this.idInput.value,n=this.pwInput.value;localStorage["backup-todo"]=JSON.stringify(this.props.userInfo.todolists),this.props.loginRequest(t,n).then(function(){"LOGGED_IN"===e.props.userInfo.status?(e.setState({formStatus:!1}),e.showWarning("Welcome, ".concat(e.props.userInfo.userId.userId))):e.showWarning("Log-in Request Failed.")})}},{key:"handleSignup",value:function(){var e=this,t=this.idInput.value,n=this.pwInput.value;this.props.signupRequest(t,n).then(function(){"SIGNUP_SUCCESS"===e.props.userInfo.status?(e.setState({formStatus:!1}),e.showWarning("".concat(t," Successfully Joined."))):e.showWarning("Sign-up Request Failed.")})}},{key:"showWarning",value:function(e){var t=this;this.setState({warning:{status:!0,message:e}}),setTimeout(function(){t.setState({warning:{status:!1,message:e}})},1500)}},{key:"onChange",value:function(e){e.target.value.length>0?e.target.classList.add("on"):e.target.classList.remove("on")}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&("signup"===this.state.formStatus?this.handleSignup():"login"===this.state.formStatus&&this.handleLogin())}},{key:"render",value:function(){var e=this,t="LOGGED_IN"===this.props.userInfo.status,n=a.a.createElement("a",{href:"/",className:"btn",onClick:this.openLogin},a.a.createElement("i",{className:"material-icons"},"vpn_key")),o=a.a.createElement("a",{href:"/",className:"btn",onClick:this.handleLogout},a.a.createElement("i",{className:"material-icons"},"lock_open")),r=a.a.createElement("div",{className:"auth-wrapper"},t?a.a.createElement("div",null,a.a.createElement("span",null,"[ ".concat(this.props.userInfo.userId.userId," ]"))," ",o):n),i=a.a.createElement("div",null,a.a.createElement("section",{className:"form-wrapper"},a.a.createElement(N,null)),a.a.createElement("section",{className:"todos-wrapper"},a.a.createElement(G,null))),s=a.a.createElement("section",{className:"sign-wrapper"},a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement("input",{type:"text",onChange:this.onChange,ref:function(t){return e.idInput=t}}),a.a.createElement("label",null,"id")),a.a.createElement("div",null,a.a.createElement("input",{type:"password",onChange:this.onChange,ref:function(t){return e.pwInput=t},onKeyPress:this.onKeyPress}),a.a.createElement("label",null,"password")),a.a.createElement("button",{type:"button",onClick:this.handleLogin},"LOG IN")),a.a.createElement("div",{className:"footer"},"New Here? ",a.a.createElement("a",{href:"/",onClick:this.openSignup},"Create an account"))),c=a.a.createElement("section",{className:"sign-wrapper"},a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement("input",{type:"text",onChange:this.onChange,ref:function(t){return e.idInput=t}}),a.a.createElement("label",null,"id")),a.a.createElement("div",null,a.a.createElement("input",{type:"password",onChange:this.onChange,ref:function(t){return e.pwInput=t},onKeyPress:this.onKeyPress}),a.a.createElement("label",null,"password")),a.a.createElement("button",{type:"button",onClick:this.handleSignup},"CREATE")));return a.a.createElement("div",{className:"todo-list-template"},a.a.createElement("header",{className:"header"},a.a.createElement("h1",{className:"title"},a.a.createElement("a",{href:"/",onClick:this.openHome},"To do List")),this.state.formStatus?void 0:r),this.state.formStatus?"login"===this.state.formStatus?s:c:i,a.a.createElement(y,{visible:this.state.warning.status,message:this.state.warning.message}))}}]),t}(o.Component),U=Object(m.b)(function(e){return{userInfo:e.userInfo}},function(e){return{loginRequest:function(t,n){return e(function(e,t){return function(n){return g.a.post("/api/user/signin",{userId:e,password:t}).then(function(e){var t=e.data.user,o=e.data.todolists;n(_(t,o))}).catch(function(e){n(b(e.response.data.code))})}}(t,n))},signupRequest:function(t,n){return e(function(e,t){return function(n){return g.a.post("/api/user/signup",{userId:e,password:t}).then(function(t){n(T(e))}).catch(function(e){n(O(e.response.data.code))})}}(t,n))},logout:function(){e({type:I.LOG_OUT_SUCCESS})},resetInput:function(t){e(v(t))}}})(D),j=(n(144),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(U,null)}}]),t}(o.Component)),A=(n(146),n(24)),w=n(3),P=n.n(w),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.EDIT_INPUT:return{text:t.text,bolded:t.bolded,color:t.color,formState:t.formState,id:t.id,checked:t.checked};case I.ADD_STATE:return{text:"",bolded:!1,color:"color1",formState:"add",id:-1,checked:!1};case I.EDIT_STATE:return{text:t.text,bolded:t.bolded,color:t.color,formState:"edit",id:t.id,checked:t.checked};case I.RESET_INPUT:return{text:"",bolded:!1,color:"color1",formState:"add",id:-1,checked:!1};default:return e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.REALIGN_MODE:return{modeState:t.modeState,fId:-1,lId:-1};case I.REALIGN_GET_FID:return{modeState:!0,fId:t.fId,lId:-1};case I.REALIGN_FID_RESET:return{modeState:!0,fId:-1,lId:-1};default:return e}},M={userId:!1,status:"INIT",todolists:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.ADD_LIST:case I.CHECK_TOGGLE_LIST:case I.EDIT_LIST:case I.REMOVE_LIST:case I.REALIGN_LIST:return P()(e,{todolists:{$set:t.todolists}});case I.LOG_IN_SUCCESS:return P()(e,{userId:{$set:t.user},status:{$set:"LOGGED_IN"},todolists:{$set:t.todolists}});case I.LOG_IN_FAILURE:return P()(e,{status:{$set:"LOGIN_FAILED"}});case I.LOG_OUT_SUCCESS:return P()(e,{userId:{$set:!1},status:{$set:"INIT"},todolists:{$set:JSON.parse(localStorage["backup-todo"])}});case I.SIGN_UP_SUCCESS:return P()(e,{status:{$set:"SIGNUP_SUCCESS"}});case I.SIGN_UP_FAILURE:return P()(e,{status:{$set:"SIGNUP_FAILED"}});case I.PUT_TODO_SUCCESS:return P()(e,{todolists:{$set:t.todolists}});case I.PUT_TODO_FAILURE:return P()(e,{status:{$set:"PUT_TODO_FAILED"+t.error}});default:return e}},K=n(101),H=n(102),W=function(e){return function(t){return function(n){console.groupCollapsed("dispatching",n.type),console.log("prev state",e.getState()),console.log("action",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},J=function(e){return function(t){return function(n){var o=t(n);return localStorage["redux-store"]=JSON.stringify(e.getState()),o}}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;return Object(A.a)(H.a,W,J)(A.d)(Object(A.c)({form:x,realignmentMode:F,userInfo:$}),localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):e)},V=(n(149),n(184),n(202),n(207),q());i.a.render(a.a.createElement(m.a,{store:V},a.a.createElement(j,null)),document.getElementById("root"))}},[[103,2,1]]]);
//# sourceMappingURL=main.53f44a44.chunk.js.map